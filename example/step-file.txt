Teen Titans Step File

1. Search for reserved characters
Find: `&|<|>`
If any are present, perform separate find and replace and replace the ampersand first!

1. Wrap Acts
Find: `^(Prologue|Act (\d))`
Replace with: `</act><act n="\2">\n<title>\0</title>`
This uses clopen method, manually remove the additional `</act>` tag from the beginning and move it to the end.

1. Wrap speakers and speeches
Find: `(^\w+.+): `
Replace with: `<sp><spkr ref="#\1">\1</spkr>`
Manually add `</sp>` tags; a bit tedious :(

1. Wrap stage direction
Find: `\((.+?)\)`
Replace with: `<sd>\1</sd>`

1. Add `<header>` and `<body>` tags

1. Fix @ref values
Find multiple speakers
    Find: `ref="#\w+,"`
    Manually fix
        - remove comma
Beast Boy:
    Find: `ref="#Beast Boy"`
    Replace with: `ref="#BeastBoy"`
    
1. Capture other character references
Find: `( |sd>|spkr>)(Character's name here)`
Replace with: `\1<char>\2</char>`
Example: Cinderblock
Find:``( |sd>|spkr>)(Cinderblock)`
Replace with: `\1<char>\2</char>`
